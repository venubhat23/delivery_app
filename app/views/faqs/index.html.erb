<div class="container-fluid">
  <div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">
      <i class="fas fa-question-circle"></i> FAQ Management
    </h1>
    <%= link_to new_faq_path, class: "d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" do %>
      <i class="fas fa-plus fa-sm text-white-50"></i> Add New FAQ
    <% end %>
  </div>

  <!-- Filters -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card shadow">
        <div class="card-body">
          <%= form_tag faqs_path, method: :get, class: "form-inline" do %>
            <div class="form-group mr-3">
              <%= select_tag :locale, 
                  options_for_select([
                    ['All Languages', ''],
                    ['English', 'en'],
                    ['Hindi', 'hi'],
                    ['Telugu', 'te'],
                    ['Tamil', 'ta'],
                    ['Kannada', 'kn'],
                    ['Malayalam', 'ml']
                  ], params[:locale]), 
                  class: "form-control" %>
            </div>
            <div class="form-group mr-3">
              <%= text_field_tag :category, params[:category], 
                  placeholder: "Category", class: "form-control" %>
            </div>
            <%= submit_tag "Filter", class: "btn btn-outline-primary mr-2" %>
            <%= link_to "Clear", faqs_path, class: "btn btn-outline-secondary" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <!-- FAQs List -->
  <div class="row">
    <div class="col-12">
      <div class="card shadow">
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered" width="100%" cellspacing="0">
              <thead>
                <tr>
                  <th>Order</th>
                  <th>Question</th>
                  <th>Category</th>
                  <th>Language</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <% @faqs.each do |faq| %>
                  <tr class="<%= faq.active? ? '' : 'table-secondary' %>">
                    <td>
                      <div class="btn-group-vertical btn-group-sm" role="group">
                        <%= link_to move_up_faq_path(faq), method: :patch, 
                            class: "btn btn-outline-secondary btn-xs" do %>
                          <i class="fas fa-arrow-up"></i>
                        <% end %>
                        <span class="badge badge-secondary"><%= faq.sort_order %></span>
                        <%= link_to move_down_faq_path(faq), method: :patch, 
                            class: "btn btn-outline-secondary btn-xs" do %>
                          <i class="fas fa-arrow-down"></i>
                        <% end %>
                      </div>
                    </td>
                    <td>
                      <strong><%= faq.question_preview %></strong><br>
                      <small class="text-muted"><%= faq.answer_preview %></small>
                    </td>
                    <td>
                      <% if faq.category.present? %>
                        <span class="badge badge-info"><%= faq.category %></span>
                      <% else %>
                        <span class="text-muted">No category</span>
                      <% end %>
                    </td>
                    <td><span class="badge badge-secondary"><%= faq.locale.upcase %></span></td>
                    <td>
                      <% if faq.active? %>
                        <span class="badge badge-success">Active</span>
                      <% else %>
                        <span class="badge badge-warning">Inactive</span>
                      <% end %>
                    </td>
                    <td>
                      <div class="btn-group" role="group">
                        <%= link_to faq_path(faq), class: "btn btn-info btn-sm" do %>
                          <i class="fas fa-eye"></i>
                        <% end %>
                        <%= link_to edit_faq_path(faq), class: "btn btn-primary btn-sm" do %>
                          <i class="fas fa-edit"></i>
                        <% end %>
                        <% if faq.active? %>
                          <%= link_to deactivate_faq_path(faq), method: :patch, 
                              class: "btn btn-warning btn-sm", 
                              data: { confirm: "Are you sure you want to deactivate this FAQ?" } do %>
                            <i class="fas fa-pause"></i>
                          <% end %>
                        <% else %>
                          <%= link_to activate_faq_path(faq), method: :patch, 
                              class: "btn btn-success btn-sm" do %>
                            <i class="fas fa-play"></i>
                          <% end %>
                        <% end %>
                        <%= link_to faq_path(faq), method: :delete, 
                            class: "btn btn-danger btn-sm", 
                            data: { confirm: "Are you sure you want to delete this FAQ?" } do %>
                          <i class="fas fa-trash"></i>
                        <% end %>
                      </div>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>