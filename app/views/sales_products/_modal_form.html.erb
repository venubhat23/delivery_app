<div class="modal fade" id="createSalesProductModal" tabindex="-1" aria-labelledby="createSalesProductModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="createSalesProductModalLabel">
          <i class="fas fa-box-open me-2"></i>Create New Sales Product
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <%= form_with model: SalesProduct.new, url: sales_products_path, local: false, 
                    class: 'needs-validation', novalidate: true, id: 'salesProductForm' do |form| %>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <%= form.label :name, 'Product Name *', class: 'form-label' %>
                <%= form.text_field :name, class: 'form-control', required: true, placeholder: 'Enter product name' %>
                <div class="invalid-feedback">
                  Please provide a product name.
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <%= form.label :category, 'Category *', class: 'form-label' %>
                <%= form.text_field :category, class: 'form-control', required: true, placeholder: 'Enter category' %>
                <div class="invalid-feedback">
                  Please provide a category.
                </div>
              </div>
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <%= form.label :purchase_price, 'Purchase Price *', class: 'form-label' %>
                <div class="input-group">
                  <span class="input-group-text">₹</span>
                  <%= form.number_field :purchase_price, class: 'form-control', required: true, step: 0.01, min: 0, placeholder: '0.00' %>
                </div>
                <div class="invalid-feedback">
                  Please provide a valid purchase price.
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <%= form.label :sales_price, 'Sales Price *', class: 'form-label' %>
                <div class="input-group">
                  <span class="input-group-text">₹</span>
                  <%= form.number_field :sales_price, class: 'form-control', required: true, step: 0.01, min: 0, placeholder: '0.00' %>
                </div>
                <div class="invalid-feedback">
                  Please provide a valid sales price.
                </div>
              </div>
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-4">
              <div class="mb-3">
                <%= form.label :measuring_unit, 'Unit *', class: 'form-label' %>
                <%= form.select :measuring_unit, 
                    options_for_select([
                      ['Pieces', 'pieces'],
                      ['Kg', 'kg'],
                      ['Liters', 'liters'],
                      ['Meters', 'meters'],
                      ['Box', 'box'],
                      ['Packet', 'packet'],
                      ['Service', 'service']
                    ]), 
                    { prompt: 'Select unit' }, 
                    { class: 'form-select', required: true } %>
                <div class="invalid-feedback">
                  Please select a measuring unit.
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="mb-3">
                <%= form.label :opening_stock, 'Opening Stock *', class: 'form-label' %>
                <%= form.number_field :opening_stock, class: 'form-control', required: true, min: 0, value: 0, placeholder: '0' %>
                <div class="invalid-feedback">
                  Please provide opening stock.
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="mb-3">
                <%= form.label :current_stock, 'Current Stock *', class: 'form-label' %>
                <%= form.number_field :current_stock, class: 'form-control', required: true, min: 0, value: 0, placeholder: '0' %>
                <div class="invalid-feedback">
                  Please provide current stock.
                </div>
              </div>
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <%= form.label :tax_rate, 'Tax Rate (%)', class: 'form-label' %>
                <%= form.number_field :tax_rate, class: 'form-control', step: 0.01, min: 0, max: 100, value: 18, placeholder: '18.00' %>
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <%= form.label :hsn_sac, 'HSN/SAC Code', class: 'form-label' %>
                <%= form.text_field :hsn_sac, class: 'form-control', placeholder: 'Enter HSN/SAC code' %>
              </div>
            </div>
          </div>
          
          <div class="mb-3">
            <%= form.label :description, 'Description', class: 'form-label' %>
            <%= form.text_area :description, rows: 3, class: 'form-control', placeholder: 'Enter product description' %>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <%= form.submit 'Create Product', class: 'btn btn-primary' %>
        </div>
      <% end %>
    </div>
  </div>
</div>